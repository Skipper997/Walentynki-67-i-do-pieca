<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Walentynki</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background-color: #fce4ec;
                min-height: 100vh;
                min-height: 100dvh;
                display: flex;
                justify-content: center;
                align-items: center;
                font-family: "Pacifico", cursive;
                overflow: hidden;
                position: relative;
            }

            .hearts-bg {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 0;
            }

            .heart {
                position: absolute;
                font-size: 2rem;
                opacity: 0.3;
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0%,
                100% {
                    transform: translateY(0) rotate(0deg);
                }
                50% {
                    transform: translateY(-20px) rotate(10deg);
                }
            }

            .content {
                text-align: center;
                z-index: 1;
                position: relative;
                padding: 1.5rem;
                width: 100%;
                max-width: 900px;
            }

            h1 {
                font-size: clamp(2.2rem, 5vw, 4.5rem);
                color: #c2185b;
                margin-bottom: 2.5rem;
                text-shadow:
                    0 0 10px rgba(255, 255, 255, 0.8),
                    0 0 20px rgba(255, 255, 255, 0.5),
                    0 0 40px rgba(244, 143, 177, 0.3),
                    2px 2px 4px rgba(0, 0, 0, 0.1);
                line-height: 1.3;
                letter-spacing: 0.02em;
            }

            .buttons {
                display: flex;
                gap: 1.5rem;
                justify-content: center;
                flex-wrap: wrap;
            }

            .btn {
                padding: 1rem 3rem;
                font-size: clamp(1rem, 2vw, 1.4rem);
                border: none;
                border-radius: 12px;
                cursor: pointer;
                font-family: "Pacifico", cursive;
                transition:
                    transform 0.2s,
                    box-shadow 0.2s;
            }

            .btn:hover {
                transform: scale(1.05);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            }

            .btn:active {
                transform: scale(0.97);
            }

            .btn-yes {
                background-color: #f48fb1;
                color: white;
            }

            .btn-yes.pulse {
                animation: pulseShake 0.6s ease-in-out forwards;
            }

            @keyframes pulseShake {
                0% {
                    transform: scale(1);
                }
                10% {
                    transform: scale(1.18) translateX(-5px) rotate(-2deg);
                }
                25% {
                    transform: scale(1.22) translateX(4px) rotate(2deg);
                }
                40% {
                    transform: scale(1.25) translateX(-3px) rotate(-1deg);
                }
                55% {
                    transform: scale(1.22) translateX(2px) rotate(1deg);
                }
                70% {
                    transform: scale(1.18) translateX(-1px);
                }
                85% {
                    transform: scale(1.08);
                }
                100% {
                    transform: scale(1);
                }
            }

            .btn-no {
                background-color: #f8bbd0;
                color: #c2185b;
                transition: none;
            }

            .btn-no.escaped {
                position: fixed;
                z-index: 10;
            }

            .btn-no.moving {
                filter: blur(3px) brightness(1.1);
                transform: scale(0.9);
                opacity: 0.6;
            }

            .btn-no.landing {
                animation: rippleLand 0.4s ease-out forwards;
            }

            @keyframes rippleLand {
                0% {
                    filter: blur(3px) brightness(1.1);
                    transform: scale(0.9);
                    opacity: 0.6;
                }
                40% {
                    filter: blur(0) brightness(1);
                    transform: scale(1.12);
                    opacity: 1;
                }
                70% {
                    transform: scale(0.95);
                }
                85% {
                    transform: scale(1.04);
                }
                100% {
                    filter: blur(0) brightness(1);
                    transform: scale(1);
                    opacity: 1;
                }
            }

            .flower {
                position: fixed;
                font-size: 2rem;
                pointer-events: none;
                z-index: 20;
                animation: flowerExplode var(--duration) ease-out forwards;
            }

            @keyframes flowerExplode {
                0% {
                    opacity: 1;
                    transform: translate(0, 0) scale(0) rotate(0deg);
                }
                20% {
                    opacity: 1;
                    transform: translate(var(--tx), var(--ty)) scale(1.3)
                        rotate(var(--rot));
                }
                100% {
                    opacity: 0;
                    transform: translate(var(--tx), calc(var(--ty) + 120px))
                        scale(0.6) rotate(var(--rot));
                }
            }

            .content.celebration h1 {
                animation: textReveal 0.8s ease-out forwards;
            }

            @keyframes textReveal {
                0% {
                    transform: scale(0.5);
                    opacity: 0;
                }
                60% {
                    transform: scale(1.08);
                    opacity: 1;
                }
                100% {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            .buttons.hidden {
                display: none;
            }

            .petal {
                position: fixed;
                top: -40px;
                pointer-events: none;
                z-index: 3;
                opacity: 0;
                animation: petalFall var(--fall-dur) linear var(--fall-delay) forwards;
            }

            @keyframes petalFall {
                0% {
                    opacity: 0;
                    transform: translateY(0) translateX(0) rotate(0deg) scale(0.8);
                }
                10% {
                    opacity: 0.8;
                }
                100% {
                    opacity: 0;
                    transform: translateY(calc(100vh + 60px)) translateX(var(--sway)) rotate(var(--spin)) scale(0.5);
                }
            }

            @media (max-width: 480px) {
                .buttons {
                    gap: 1rem;
                }

                .btn {
                    padding: 0.8rem 2.2rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="hearts-bg" id="hearts"></div>

        <div class="content">
            <h1>Zostaniesz moją walentynką?</h1>
            <div class="buttons">
                <button class="btn btn-yes">Tak</button>
                <button class="btn btn-no">Nie</button>
            </div>
        </div>

        <script>
            const hearts = document.getElementById("hearts");
            const colors = [
                "#f48fb1",
                "#f8bbd0",
                "#f06292",
                "#e91e63",
                "#ff80ab",
            ];

            for (let i = 0; i < 30; i++) {
                const heart = document.createElement("span");
                heart.classList.add("heart");
                heart.textContent = "\u2665";
                heart.style.left = Math.random() * 100 + "%";
                heart.style.top = Math.random() * 100 + "%";
                heart.style.fontSize = Math.random() * 4 + 2.5 + "rem";
                heart.style.color =
                    colors[Math.floor(Math.random() * colors.length)];
                heart.style.animationDelay = Math.random() * 6 + "s";
                heart.style.animationDuration = Math.random() * 4 + 4 + "s";
                hearts.appendChild(heart);
            }
            const noBtn = document.querySelector(".btn-no");
            const yesBtn = document.querySelector(".btn-yes");
            let escapeCount = 0;

            function rectsOverlap(r1, r2, padding) {
                return !(
                    r1.right + padding < r2.left ||
                    r1.left - padding > r2.right ||
                    r1.bottom + padding < r2.top ||
                    r1.top - padding > r2.bottom
                );
            }

            function escapeButton() {
                const btnW = noBtn.offsetWidth;
                const btnH = noBtn.offsetHeight;
                const maxX = window.innerWidth - btnW - 20;
                const maxY = window.innerHeight - btnH - 20;
                const yesRect = yesBtn.getBoundingClientRect();

                let x,
                    y,
                    attempts = 0;
                do {
                    x = Math.random() * maxX + 10;
                    y = Math.random() * maxY + 10;
                    const noRect = {
                        left: x,
                        top: y,
                        right: x + btnW,
                        bottom: y + btnH,
                    };
                    attempts++;
                } while (
                    rectsOverlap(
                        { left: x, top: y, right: x + btnW, bottom: y + btnH },
                        yesRect,
                        30,
                    ) &&
                    attempts < 50
                );

                noBtn.classList.remove("landing");
                noBtn.classList.add("escaped", "moving");

                requestAnimationFrame(() => {
                    noBtn.style.left = x + "px";
                    noBtn.style.top = y + "px";

                    setTimeout(() => {
                        noBtn.classList.remove("moving");
                        noBtn.classList.add("landing");
                    }, 60);
                });

                yesBtn.classList.remove("pulse");
                void yesBtn.offsetWidth;
                yesBtn.classList.add("pulse");
            }

            noBtn.addEventListener("mouseenter", escapeButton);
            noBtn.addEventListener("touchstart", function (e) {
                e.preventDefault();
                escapeButton();
            });

            const heading = document.querySelector("h1");
            const buttonsDiv = document.querySelector(".buttons");
            const content = document.querySelector(".content");
            const music = new Audio("greatmusic.mp3");
            music.loop = true;

            const flowers = [
                "\uD83C\uDF39",
                "\uD83C\uDF3A",
                "\uD83C\uDF3B",
                "\uD83C\uDF37",
                "\uD83C\uDF38",
                "\uD83C\uDF3C",
                "\uD83D\uDC90",
                "\u2764\uFE0F",
            ];

            function spawnFlowerBurst(cx, cy, count) {
                for (let i = 0; i < count; i++) {
                    const el = document.createElement("span");
                    el.classList.add("flower");
                    el.textContent =
                        flowers[Math.floor(Math.random() * flowers.length)];
                    el.style.left = cx + "px";
                    el.style.top = cy + "px";
                    el.style.fontSize = Math.random() * 1.5 + 1.5 + "rem";

                    const angle =
                        ((Math.PI * 2) / count) * i +
                        (Math.random() - 0.5) * 0.5;
                    const dist = Math.random() * 180 + 80;
                    el.style.setProperty("--tx", Math.cos(angle) * dist + "px");
                    el.style.setProperty("--ty", Math.sin(angle) * dist + "px");
                    el.style.setProperty("--rot", Math.random() * 360 + "deg");
                    el.style.setProperty(
                        "--duration",
                        Math.random() * 0.8 + 1 + "s",
                    );

                    document.body.appendChild(el);
                    el.addEventListener("animationend", () => el.remove());
                }
            }

            const petalEmojis = ["\uD83C\uDF38", "\uD83C\uDF3A", "\uD83C\uDF39"];
            let petalInterval = null;

            function spawnPetal() {
                const el = document.createElement("span");
                el.classList.add("petal");
                el.textContent = petalEmojis[Math.floor(Math.random() * petalEmojis.length)];
                el.style.left = Math.random() * 100 + "vw";
                el.style.fontSize = (Math.random() * 1.2 + 1) + "rem";
                el.style.setProperty("--fall-dur", (Math.random() * 4 + 5) + "s");
                el.style.setProperty("--fall-delay", "0s");
                el.style.setProperty("--sway", (Math.random() * 120 - 60) + "px");
                el.style.setProperty("--spin", (Math.random() * 540 - 270) + "deg");
                document.body.appendChild(el);
                el.addEventListener("animationend", () => el.remove());
            }

            function startPetalRain() {
                for (let i = 0; i < 20; i++) {
                    const el = document.createElement("span");
                    el.classList.add("petal");
                    el.textContent = petalEmojis[Math.floor(Math.random() * petalEmojis.length)];
                    el.style.left = Math.random() * 100 + "vw";
                    el.style.fontSize = (Math.random() * 1.2 + 1) + "rem";
                    el.style.setProperty("--fall-dur", (Math.random() * 4 + 5) + "s");
                    el.style.setProperty("--fall-delay", (Math.random() * 3) + "s");
                    el.style.setProperty("--sway", (Math.random() * 120 - 60) + "px");
                    el.style.setProperty("--spin", (Math.random() * 540 - 270) + "deg");
                    document.body.appendChild(el);
                    el.addEventListener("animationend", () => el.remove());
                }
                petalInterval = setInterval(() => {
                    spawnPetal();
                }, 400);
            }

            yesBtn.addEventListener("click", function () {
                const rect = yesBtn.getBoundingClientRect();
                const cx = rect.left + rect.width / 2;
                const cy = rect.top + rect.height / 2;

                spawnFlowerBurst(cx, cy, 30);
                setTimeout(() => spawnFlowerBurst(cx, cy, 20), 200);
                setTimeout(() => spawnFlowerBurst(cx, cy, 15), 500);

                noBtn.style.display = "none";
                buttonsDiv.classList.add("hidden");
                content.classList.add("celebration");
                heading.textContent = "Kocham ci\u0119, Karolciu";

                startPetalRain();

                music.play();
            });
        </script>
    </body>
</html>
